.builder-grid {
  display: grid;
  grid-template-columns: 260px 1fr 360px;
  grid-template-rows: 1fr 360px;
  gap: 12px;
  min-height: calc(100vh - 32px);
}

.card { border-radius: 12px; }
.sticky { position: sticky; top: 12px; align-self: start; }
.mt { margin-top: 12px; }
.fill { height: 100%; }

.left .toolbar {
  display: grid; grid-template-columns: repeat(2, 1fr);
  gap: 6px; margin-bottom: 8px;
}
.context-actions { display: flex; gap: 6px; margin-top: 6px; }

.palette { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; }

.io textarea { width: 100%; min-height: 120px; resize: vertical; }
.io-actions { margin-top: 6px; display: flex; gap: 6px; }

.center { overflow: auto; }
.center .card { display: flex; flex-direction: column; overflow: auto; }
.center .card .steps,
.center .card .sections,
.center .card .fields { overflow: auto; padding-right: 6px; }

.step, .section, .field {
  border: 1px solid #e8e8e8; border-radius: 10px; background: #fafafa;
  padding: 8px; margin-bottom: 8px; transition: .15s;
}
.step:hover, .section:hover, .field:hover {
  border-color: #bfbfbf; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,.06);
}
.selected { border-color: #1677ff; box-shadow: 0 0 0 2px rgba(22,119,255,.15); background: #fff; }

.step-header, .section-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-bottom: 8px; cursor: grab; }
.section-header .t { font-weight: 600; }
.section-header .d { font-size: 12px; color: #64748b; margin-top: 2px; }

.fields .field { display: flex; justify-content: space-between; align-items: center; gap: 6px; }
.field .f-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 70%; }
.field .span-ctrls { display: inline-flex; align-items: center; gap: 4px; }
.field .drag-handle { cursor: grab; padding: 0 4px; color: #94a3b8; user-select: none; }
.field .resize-handle {
  width: 10px; height: 20px; cursor: ew-resize;
  display: inline-block; background: rgba(0,0,0,0.06);
  border-radius: 4px; margin-left: 4px;
}

/* Grille 24 colonnes en fond pour aider au resize visuel */
.fields.grid.show-grid {
  position: relative;
  background-image:
    repeating-linear-gradient(
      to right,
      rgba(22, 119, 255, 0.08) 0,
      rgba(22, 119, 255, 0.08) calc((100% / 24) - 1px),
      transparent calc((100% / 24) - 1px),
      transparent calc(100% / 24)
    );
  background-size: 100% 100%;
}

.right .inspector-form nz-form-item { margin-bottom: 10px; }
.inline-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }

.bp { display: flex; flex-wrap: wrap; gap: 6px; }

/* Scroll fixes */
.left .tree { max-height: 320px; overflow: auto; }
.left .tree { position: relative; }
.left .tree .tree-node-label { cursor: context-menu; display: inline-block; width: 100%; }
.left .tree .ctx {
  position: absolute; z-index: 1000; background: #fff; border: 1px solid #e5e7eb; border-radius: 8px;
  padding: 6px; display: grid; gap: 6px; box-shadow: 0 8px 24px rgba(0,0,0,.12);
}
.right .card.sticky { max-height: calc(100vh - 24px); overflow: auto; }

.bottom .preview-frame {
  margin: 0 auto;
  background: #fcfcfc;
  border: 1px dashed #eee;
  border-radius: 10px;
  padding: 8px;
}
.bottom .json {
  background: #0f172a; color: #e2e8f0; padding: 12px; border-radius: 10px;
  max-height: 280px; overflow: auto; font-size: 12px;
}
